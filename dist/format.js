window.storyFormat({"name":"Explorer","version":"1.0.0","author":"Steve Washington","image":"","url":"","license":"MIT","proofing":false,"source":"<!DOCTYPE html>\n<html>\n\t<head>\n\t\t<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n\t\t<meta charset=\"utf-8\">\n\t\t<title>{{STORY_NAME}}</title>\n\t</head>\n\t<body>\n\t\t{{STORY_DATA}}\n\t\t<div id=\"tw-story\">\n\t\t\t<div id=\"tw-passage\"></div>\n\t\t</div>\n\t</body>\n\t<script type=\"text/javascript\">\n\t\t// Part 1, parse <tw-storydata> node\n// Part 2, use that data to display stuff in the #passage node\n// Part 3, other fun stuff!\nconst $882b6d93070905b3$var$buildStoryData = ()=>{\n    // Get Story data from root node\n    const rootStoryDataNode = document.querySelector(\"tw-storydata\");\n    if (!rootStoryDataNode) throw new Error(\"Story Data is missing! Oops!\");\n    const name = rootStoryDataNode.getAttribute(\"name\");\n    const ifid = rootStoryDataNode.getAttribute(\"ifid\");\n    const startnode = rootStoryDataNode.getAttribute(\"startnode\");\n    if (!name) throw new Error(\"Story is missing a name!\");\n    if (!ifid) throw new Error(`Story is missing an ifid!`);\n    if (!startnode) throw new Error(`No startnode specified!`);\n    const format = rootStoryDataNode.getAttribute(\"format\");\n    const formatVersion = rootStoryDataNode.getAttribute(\"format-version\");\n    const zoom = rootStoryDataNode.getAttribute(\"zoom\");\n    const creator = rootStoryDataNode.getAttribute(\"creator\");\n    const creatorVersion = rootStoryDataNode.getAttribute(\"creator-version\");\n    // Get Passages Data\n    const passages = [];\n    const passageNodes = document.querySelectorAll(\"tw-passagedata\");\n    Array.from(passageNodes).forEach((node)=>{\n        const pid = node.getAttribute(\"pid\");\n        const name = node.getAttribute(\"name\");\n        if (!pid) throw new Error(`A passage (name: ${name}) is missing a pid!`);\n        if (!name) throw new Error(`A passage with pid ${pid} is missing a name!`);\n        const tagsRaw = node.getAttribute(\"name\");\n        const positionRaw = node.getAttribute(\"name\");\n        const sizeRaw = node.getAttribute(\"name\");\n        const content = node.innerHTML;\n        const tags = tagsRaw?.split(\" \");\n        const position = {\n            x: 0,\n            y: 0\n        };\n        if (positionRaw) {\n            const positionCoords = positionRaw.split(\",\").map((n)=>parseFloat(n));\n            position.x = positionCoords[0];\n            position.y = positionCoords[1];\n        }\n        const size = {\n            width: 100,\n            height: 100\n        };\n        if (sizeRaw) {\n            const dims = sizeRaw.split(\",\").map((n)=>parseFloat(n));\n            size.width = dims[0];\n            size.height = dims[1];\n        }\n        passages.push({\n            pid: pid,\n            name: name,\n            tags: tags,\n            position: position,\n            size: size,\n            content: content\n        });\n    });\n    return {\n        name: name,\n        ifid: ifid,\n        format: format,\n        formatVersion: formatVersion,\n        startnode: startnode,\n        zoom: zoom,\n        creator: creator,\n        creatorVersion: creatorVersion,\n        passages: passages,\n        currentPassagePid: startnode\n    };\n};\nconst $882b6d93070905b3$var$getPassageByPid = (pid, passages)=>{\n    return passages.find((passage)=>{\n        return passage.pid === pid;\n    });\n};\nconst $882b6d93070905b3$var$displayPassage = (pid, passages, node)=>{\n    if (!pid) throw new Error(`Tried to display a passage without supplying a pid!`);\n    const passage = $882b6d93070905b3$var$getPassageByPid(pid, passages);\n    if (!passage) throw new Error(`Tried to display passage with pid: ${pid}, but it doesn't exist!`);\n    node.innerHTML = passage.content;\n};\n(()=>{\n    const storyData = $882b6d93070905b3$var$buildStoryData();\n    const storyContainer = document.querySelector(\"#tw-story\");\n    if (!storyContainer) throw new Error(`Missing story container #tw-story!`);\n    const passageContainer = storyContainer.querySelector(\"#tw-story #tw-passage\");\n    if (!passageContainer) throw new Error(`Missing passage container #tw-passage`);\n    $882b6d93070905b3$var$displayPassage(storyData.currentPassagePid, storyData.passages, passageContainer);\n})();\n\n\n//# sourceMappingURL=index.js.map\n\n\t</script>\n</html>"})