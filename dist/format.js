window.storyFormat({"name":"Explorer","version":"1.0.0","author":"Steve Washington","image":"","url":"","license":"MIT","proofing":false,"source":"<!DOCTYPE html>\n<html>\n\t<head>\n\t\t<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n\t\t<meta charset=\"utf-8\">\n\t\t<title></title>\n\t</head>\n\t<body>\n\t\t\n\t\t<div id=\"tw-story\">\n\t\t\t<div id=\"tw-passage\"></div>\n\t\t</div>\n\t</body>\n\t<script type=\"text/javascript\">\n\t\t// Part 1, parse &lt;tw-storydata&gt; node\n// Part 2, use that data to display stuff in the #passage node\n// Part 3, other fun stuff!\nconst $882b6d93070905b3$var$buildStoryData &#x3D; ()&#x3D;&gt;{\n    // Get Story data from root node\n    const rootStoryDataNode &#x3D; document.querySelector(&quot;tw-storydata&quot;);\n    if (!rootStoryDataNode) throw new Error(&quot;Story Data is missing! Oops!&quot;);\n    const name &#x3D; rootStoryDataNode.getAttribute(&quot;name&quot;);\n    const ifid &#x3D; rootStoryDataNode.getAttribute(&quot;ifid&quot;);\n    const startnode &#x3D; rootStoryDataNode.getAttribute(&quot;startnode&quot;);\n    if (!name) throw new Error(&quot;Story is missing a name!&quot;);\n    if (!ifid) throw new Error(&#x60;Story is missing an ifid!&#x60;);\n    if (!startnode) throw new Error(&#x60;No startnode specified!&#x60;);\n    const format &#x3D; rootStoryDataNode.getAttribute(&quot;format&quot;);\n    const formatVersion &#x3D; rootStoryDataNode.getAttribute(&quot;format-version&quot;);\n    const zoom &#x3D; rootStoryDataNode.getAttribute(&quot;zoom&quot;);\n    const creator &#x3D; rootStoryDataNode.getAttribute(&quot;creator&quot;);\n    const creatorVersion &#x3D; rootStoryDataNode.getAttribute(&quot;creator-version&quot;);\n    // Get Passages Data\n    const passages &#x3D; [];\n    const passageNodes &#x3D; document.querySelectorAll(&quot;tw-passagedata&quot;);\n    Array.from(passageNodes).forEach((node)&#x3D;&gt;{\n        const pid &#x3D; node.getAttribute(&quot;pid&quot;);\n        const name &#x3D; node.getAttribute(&quot;name&quot;);\n        if (!pid) throw new Error(&#x60;A passage (name: ${name}) is missing a pid!&#x60;);\n        if (!name) throw new Error(&#x60;A passage with pid ${pid} is missing a name!&#x60;);\n        const tagsRaw &#x3D; node.getAttribute(&quot;name&quot;);\n        const positionRaw &#x3D; node.getAttribute(&quot;name&quot;);\n        const sizeRaw &#x3D; node.getAttribute(&quot;name&quot;);\n        const content &#x3D; node.innerHTML;\n        const tags &#x3D; tagsRaw?.split(&quot; &quot;);\n        const position &#x3D; {\n            x: 0,\n            y: 0\n        };\n        if (positionRaw) {\n            const positionCoords &#x3D; positionRaw.split(&quot;,&quot;).map((n)&#x3D;&gt;parseFloat(n));\n            position.x &#x3D; positionCoords[0];\n            position.y &#x3D; positionCoords[1];\n        }\n        const size &#x3D; {\n            width: 100,\n            height: 100\n        };\n        if (sizeRaw) {\n            const dims &#x3D; sizeRaw.split(&quot;,&quot;).map((n)&#x3D;&gt;parseFloat(n));\n            size.width &#x3D; dims[0];\n            size.height &#x3D; dims[1];\n        }\n        passages.push({\n            pid: pid,\n            name: name,\n            tags: tags,\n            position: position,\n            size: size,\n            content: content\n        });\n    });\n    return {\n        name: name,\n        ifid: ifid,\n        format: format,\n        formatVersion: formatVersion,\n        startnode: startnode,\n        zoom: zoom,\n        creator: creator,\n        creatorVersion: creatorVersion,\n        passages: passages,\n        currentPassage: startnode\n    };\n};\nconst $882b6d93070905b3$var$getPassageByPid &#x3D; (pid, passages)&#x3D;&gt;{\n    return passages.find((passage)&#x3D;&gt;{\n        return passage.pid &#x3D;&#x3D;&#x3D; pid;\n    });\n};\nconst $882b6d93070905b3$var$displayPassage &#x3D; ({ currentPassage: currentPassagePid , passages: passages  }, node)&#x3D;&gt;{\n    if (!currentPassagePid) throw new Error(&#x60;Tried to display a passage without supplying a pid!&#x60;);\n    const passage &#x3D; $882b6d93070905b3$var$getPassageByPid(currentPassagePid, passages);\n    if (!passage) throw new Error(&#x60;Tried to display passage with pid: ${currentPassagePid}, but it doesn&#x27;t exist!&#x60;);\n    node.innerHTML &#x3D; passage.content;\n};\n(()&#x3D;&gt;{\n    const storyData &#x3D; $882b6d93070905b3$var$buildStoryData();\n    const storyContainer &#x3D; document.querySelector(&quot;#tw-story&quot;);\n    if (!storyContainer) throw new Error(&#x60;Missing story container #tw-story!&#x60;);\n    const passageContainer &#x3D; storyContainer.querySelector(&quot;#tw-story #tw-passage&quot;);\n    if (!passageContainer) throw new Error(&#x60;Missing passage container #tw-passage&#x60;);\n    $882b6d93070905b3$var$displayPassage(storyData, passageContainer);\n})();\n\n\n//# sourceMappingURL&#x3D;index.js.map\n\n\t</script>\n</html>"})